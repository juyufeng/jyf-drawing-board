/*! eventbus v1.0.0 2014-07-17 09:07:11 src:[src/eventbus.js] */
!function(a){var b={_all:[]},c=[],d=function(a){return"[object Array]"===Object.prototype.toString.call(a)},e=function(a,b){if(!d(b))return!1;for(var c=0,e=b.length;e>c;c++)if(a==b[c])return!0;return!1},f=function(a){if(e(a,c))for(var d=b._all,f=0;f<d.length;f++){var g=d[f];if(g&&e(a,d[f].events)&&!e(a,d[f].finished)&&d[f].finished.push(a),g&&d[f].events.length==d[f].finished.length){for(var h=[],i=0;i<d[f].events.length;i++){var j=d[f].events[i];h.push(b[j].info)}var k=d[f].callback;k&&k.apply(this,h)}}},g={on:function(a,c){b[a]||(b[a]={queue:[],result:0,info:null});var d=b[a].queue.push(c)-1;return function(a,c){return{off:function(){delete b[a].queue[c]}}}(a,d)},emit:function(a,c){if(b[a]&&b[a].queue.length){b[a].result=1,b[a].info=c;for(var d=b[a].queue,e=0;e<d.length;e++){var g=d[e];g&&g(c||{})}f(a)}},all:function(){for(var a,f=arguments,g=[],h=0;h<f.length;h++){var i=f[h];if("string"!=typeof i||e(i,g)){if(d(i))for(var j=0;j<i.length;j++)"string"!=typeof i[j]||e(i[j],g)||(g.push(i[j]),c.push(i[j]))}else g.push(i),c.push(i)}"function"==typeof f[f.length-1]&&(a=f[f.length-1]);var k={events:g,finished:[],callback:a},l=b._all.push(k)-1;return function(a,b){return{off:function(){delete a[b]}}}(b._all,l)},debug:function(){console&&console.log&&console.log(b)}};a.eventbus=g}(window,document);